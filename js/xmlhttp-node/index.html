<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    abc
    <script>
        // const xhr = new XMLHttpRequest();
        // xhr.open('POST','/getPosts',true); //true 为异步请求
        // xhr.timeout = 2000;

        // xhr.setRequestHeader('X-Real-IP','211.161.244.70');
        // xhr.setRequestHeader('Content-Type','application/json');
        // xhr.addEventListener('timeout',function(){
        //     console.log('timeout')
        // })
        // xhr.addEventListener('readstatechange',function(){
        //     if(xhr.readyState === 4){
        //         console.log(xhr.response,xhr.status);
        //     }
        // })
        // // 发送
        // // post
        // let obj = {
        //     query:'js',type:'all'
        // }
        // xhr.send(JSON.stringify(obj));

        function axios(method, url, params = {}, headers = {}){
            const xhr = new XMLHttpRequest();
            xhr.open(method,url,true);
            for(let k in headers){
                xhr.setRequestHeader(k,headers[k])
            }
            xhr.addEventListener('readstatechange',function(){

            })
            let data = headers['Content-Type']&&
            headers['Content-Type'] === 'application/json' ? JSON.stringify(params):params
            xhr.send(data);
        }
        axios('POST','/getPosts',
        {type:'all',query:'js'},
        {'X-Real-IP':'211.161.244.70',
        'Content-Type':'application/json'})
    </script>
</body>
</html>